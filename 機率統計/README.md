# 機率統計 

涉及隨機數生成、機率分佈、統計運算等應用，常用的函式庫包括 random（內建）、numpy、scipy.stats 和 pandas。以下是一些基本範例：


## 1. 隨機數生成（Random Sampling）

使用 random 來產生隨機數：

```other
import random

# 生成 0 到 1 之間的隨機浮點數
print(random.random())

# 生成 1 到 100 之間的隨機整數
print(random.randint(1, 100))

# 從列表中隨機選擇一個元素
choices = ['蘋果', '香蕉', '橘子']
print(random.choice(choices))

# 從列表中抽取 2 個不重複的元素
print(random.sample(choices, 2))
```

----

## 2. 常見機率分佈

### 1常態分佈（Normal Distribution）

**常態分佈實作檔**

高斯分佈（Gaussian distribution），也稱為常態分佈（normal distribution），是一種連續概率分佈，常用於描述自然界中許多現象的數據分佈。它的特徵是數據分佈呈現鐘形曲線（bell-shaped curve），具有以下關鍵特性：

1. **對稱性**：曲線以平均值（mean, μ）為中心，左右對稱。
2. **集中性**：大多數數據點分佈在平均值附近，隨著數據值偏離平均值，出現的概率逐漸減少。
3. **參數**：由兩個參數決定：
	- 平均值（μ）：表示數據的中心位置。
	- 標準差（σ）: ：表示數據的分散程度，標準差越大，曲線越扁平。?

> [!IMPORTANT]
> 高斯分佈之所以重要，是因為許多自然現象（如身高、考試成績、測量誤差等）的數據分佈近似符合高斯分佈，這使得它在統計學和機器學習中廣泛應用。

**機器學習常說「特徵符合高斯分佈」**
在機器學習中，特別是 GaussianNB（高斯單純貝氏模型），假設每個特徵的數據分佈符合高斯分佈，意味著：

- 該特徵的數值是連續的（例如身高、溫度）。
- 這些數值的分佈形狀近似鐘形曲線，大多數值集中在平均值附近，極端值（很小或很大）的出現概率較低。
- GaussianNB 使用高斯分佈的概率密度函數來估計每個特徵在不同類別下的概率，從而進行分類。

如果特徵的數據分佈偏離高斯分佈（例如呈現偏態或多峰分佈），GaussianNB 的表現可能會受到影響，因為它的假設不再完全成立。

**實際的例子**
假設您正在研究學生的身高數據，來預測他們是否適合參加籃球隊：

- **特徵**：身高（連續數據，單位：厘米）。
- **數據分佈**：假設身高數據符合高斯分佈，平均值 μ = 170 cm，標準差 σ = 10 cm。
- **分佈特性**：
	- 大多數學生身高集中在 160 cm 到 180 cm 之間（約 68% 的數據在 μ ± σ 範圍內）。
	- 極端值（例如 140 cm 或 200 cm）的學生很少出現。
	- 鐘形曲線：如果畫出身高分佈的直方圖，它會呈現一個對稱的鐘形曲線，中心在 170 cm。

- **視學化理解**

1. 鐘形曲線：如果畫出身高分佈的直方圖，它會呈現一個對稱的鐘形曲線，中心在 170 cm。
2. 說明曲線下的面積表示概率，例如
	- 約 68% 的數據落在 μ ± σ 範圍內。
	- 約 95% 的數據落在 μ ± 2σ 範圍內。
3. 實際例子（如身高、考試成績）對照，強調「大多數數據集中在中間，極端值少見」。

**實作範例**

[**正態(常態)分佈實作ipynb檔**](./正態分佈.ipynb)

[**使用Q-Q圖(Quantile-Quantile Plot)是否為常態分佈-ipynb檔**](./正態分佈1.ipynb)



```other
import numpy as np

# 生成 5 個符合均值 0、標準差 1 的正態分佈數值
normal_data = np.random.normal(loc=0, scale=1, size=5)
print(normal_data)
```


### 2. 均勻分佈（Uniform Distribution）

[**均勻分佈實作ipynb檔**](./均勻分佈.ipynb)

```other
uniform_data = np.random.uniform(low=0, high=10, size=5)
print(uniform_data)
```


### 3. 二項分佈（Binomial Distribution）

[**2項分佈實作ipynb檔**](./2項分佈.ipynb)

```other
# 進行 10 次獨立拋硬幣試驗，成功機率為 0.5
binomial_data = np.random.binomial(n=10, p=0.5, size=5)
print(binomial_data)
```

----

## Quantile-Quantile Plot（簡稱 Q-Q 圖）是一種圖形工具，用於檢查數據的分佈是否符合某個特定的理論分佈，或者比較兩個數據集的分佈是否相似。以下是以正式、清晰的語氣，針對您作為機器學習老師的需求，解釋 Q-Q 圖可以檢查哪些分佈，並提供簡單的例子和教學建議，以幫助學生快速理解。

---

### Q-Q 圖的用途
Q-Q 圖通過比較數據的**分量（quantiles）**與理論分佈（或另一組數據）的分量，來評估數據是否符合某個分佈。具體來說：
1. **檢查數據是否符合特定理論分佈**：例如高斯分佈（常態分佈）、均勻分佈、指數分佈等。
2. **比較兩個數據集的分佈**：判斷它們是否來自相同的分佈。
3. 如果 Q-Q 圖上的點近似落在對角線（y=x 線）上，則表示數據分佈與理論分佈（或另一組數據）一致。

---

**Q-Q 圖可以檢查哪些分佈？**

Q-Q 圖是通用的工具，理論上可以用來檢查任何分佈是否與數據匹配。以下是常見的分佈類型，Q-Q 圖特別適用於檢查這些分佈：

1. **高斯分佈（常態分佈, Normal Distribution）**：
   - 最常見的應用，因為許多統計方法（如 GaussianNB）假設數據符合高斯分佈。
   - Q-Q 圖檢查數據是否呈現鐘形曲線分佈。
   - **例子**：檢查學生的考試成績是否符合高斯分佈。
   - **判斷標準**：如果點沿著對角線分佈，則數據近似高斯分佈；如果點偏離（例如呈 S 形或彎曲），則可能不符。

2. **均勻分佈（Uniform Distribution）**：
   - 用於檢查數據是否均勻分佈在某個範圍內（每個值出現的概率相等）。
   - **例子**：檢查隨機數生成器的輸出是否均勻分佈。
   - **判斷標準**：如果數據符合均勻分佈，Q-Q 圖的點會近似沿對角線排列。

3. **指數分佈（Exponential Distribution）**：
   - 用於檢查數據是否符合指數分佈，常用於描述事件間的等待時間（如電話呼叫間隔）。
   - **例子**：檢查顧客到達商店的時間間隔是否符合指數分佈。
   - **判斷標準**：如果點沿對角線，則數據符合指數分佈；否則可能有其他分佈特性。

4. **對數正態分佈（Log-Normal Distribution）**：
   - 用於檢查數據取對數後是否符合高斯分佈，常用於描述偏態數據（如收入、股票價格）。
   - **例子**：檢查某公司員工薪資是否符合對數正態分佈。
   - **判斷標準**：對數據取對數後，Q-Q 圖與高斯分佈比較，若點沿對角線，則符合。

5. **其他分佈**：
   - Q-Q 圖也可以檢查其他分佈，例如伽馬分佈（Gamma Distribution）、韋伯分佈（Weibull Distribution）、卡方分佈（Chi-Square Distribution）等。
   - 只要能定義理論分佈的分量，Q-Q 圖就可以用來比較。

6. **比較兩個數據集**：
   - Q-Q 圖不僅限於理論分佈，還可以用來比較兩個數據集的分佈是否相同。
   - **例子**：比較兩組學生的考試成績，檢查它們是否來自同一分佈。

---

**Q-Q 圖的工作原理**

1. **分量比較**：
   - 將數據的觀測值按升序排列，計算其分量（例如，數據的第 25% 分位數）。
   - 將這些分量與理論分佈（或另一組數據）的相同分量進行比較。
2. **繪圖**：
   - X 軸：理論分佈的分量（或第二組數據的分量）。
   - Y 軸：實際數據的分量。
   - 如果點沿對角線（y=x）排列，則數據分佈與理論分佈一致。
3. **偏離的意義**：
   - 如果點呈 S 形，數據可能有偏態（skewness）。
   - 如果點呈弧形，數據可能有較重的尾部（heavy tails）或較輕的尾部（light tails）。

---

### 簡單範例
以下是三個場景，展示 Q-Q 圖如何檢查不同分佈：

1. **檢查高斯分佈**：
   - **場景**：您收集了 100 名學生的數學考試成績，想確認是否符合高斯分佈。
   - **數據**：成績範圍 0-100，平均值 75，標準差 10。
   - **Q-Q 圖**：
     - X 軸：標準正態分佈（μ=0, σ=1）的分量。
     - Y 軸：標準化後的成績分量。
     - 如果點沿對角線，成績符合高斯分佈；如果點在兩端偏離，可能是偏態分佈。

2. **檢查均勻分佈**：
   - **場景**：您生成了一組隨機數（0 到 1 之間），想確認它們是否均勻分佈。
   - **數據**：1000 個隨機數。
   - **Q-Q 圖**：
     - X 軸：均勻分佈（0,1）的分量。
     - Y 軸：隨機數的分量。
     - 如果點沿對角線，數據符合均勻分佈；如果點彎曲，可能有聚集現象。

3. **檢查指數分佈**：
   - **場景**：您記錄了顧客到達咖啡店的時間間隔（分鐘），想確認是否符合指數分佈。
   - **數據**：100 個時間間隔，平均間隔 5 分鐘。
   - **Q-Q 圖**：
     - X 軸：指數分佈（λ=1/5）的分量。
     - Y 軸：時間間隔的分量。
     - 如果點沿對角線，數據符合指數分佈；如果點偏離，可能有其他分佈特性。

---


1. **視覺化展示**：
   - 用 Python 的 `scipy.stats` 和 `matplotlib` 繪製 Q-Q 圖，展示高斯分佈的例子。例如：
     ```python
     import numpy as np
     import matplotlib.pyplot as plt
     from scipy import stats

     # 模擬高斯分佈數據
     data = np.random.normal(loc=75, scale=10, size=100)
     stats.probplot(data, dist="norm", plot=plt)
     plt.title("Q-Q Plot for Normal Distribution")
     plt.show()
     ```
   - 展示不同分佈（高斯、均勻、指數）的 Q-Q 圖，讓學生比較點的分佈。

2. **類比**：
   - 將 Q-Q 圖比喻為「試衣服」：數據是您的身材，理論分佈是衣服款式。如果衣服（分佈）合身，點會沿著對角線；如果不合身，點會偏離。

3. **互動問題**：
   - 問學生：「如果 Q-Q 圖的點在兩端向上彎曲，你覺得數據分佈可能是什麼特性？」（提示：可能有較重的尾部，如 t 分佈）。
   - 讓學生猜測某數據（例如身高、等待時間）可能符合哪種分佈，然後用 Q-Q 圖驗證。

4. **結合機器學習**：
   - 解釋 Q-Q 圖在 GaussianNB 中的重要性：檢查特徵是否符合高斯分佈假設，以確保模型的適用性。
   - 展示如果特徵不完全符合高斯分佈（例如偏態），可以用數據變換（如對數變換）來改善。

---

### 總結
- Q-Q 圖可以用來檢查數據是否符合任何理論分佈，包括：
  - 高斯分佈（常態分佈）：檢查連續數據的鐘形分佈。
  - 均勻分佈：檢查數據是否均等分佈。
  - 指數分佈：檢查等待時間等數據。
  - 對數正態分佈、伽馬分佈等其他分佈。
- 也可以比較兩個數據集的分佈是否相同。
- 如果 Q-Q 圖的點沿對角線，數據分佈與理論分佈一致；偏離則表示不符。

如果您需要更詳細的程式碼範例、數學推導，或針對特定分佈的深入解釋，請隨時告知！

----



**3. 基本統計計算**

使用 numpy 計算常見統計量：

```other
data = [12, 15, 20, 25, 30]

# 平均數
print("平均數:", np.mean(data))

# 中位數
print("中位數:", np.median(data))

# 標準差
print("標準差:", np.std(data))

# 變異數
print("變異數:", np.var(data))
```

----

**4. 機率密度函數與累積分佈函數**

使用 scipy.stats 計算機率分佈相關函數。

**(1) 計算某數值在標準正態分佈下的機率**

```other
from scipy.stats import norm

x = 1.0  # 目標數值
pdf_value = norm.pdf(x, loc=0, scale=1)  # 機率密度函數
cdf_value = norm.cdf(x, loc=0, scale=1)  # 累積分佈函數

print("PDF:", pdf_value)
print("CDF:", cdf_value)
```


**(2) 計算某數值在二項分佈下的機率**

```other
from scipy.stats import binom

n, p, k = 10, 0.5, 3  # 10 次試驗, 成功機率 0.5, 觀察 3 次成功
prob = binom.pmf(k, n, p)
print(f"成功 {k} 次的機率: {prob}")
```


